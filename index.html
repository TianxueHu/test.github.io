<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- css and js sourcefile -->
    <link rel="stylesheet" href="./static/style.css" type="text/css">
    <script src="./static/myscript.js"></script>
</head>

<body>
    <!-- header start -->
    <div class="header w">
        <div class="logo">
            Webpage logo
        </div>
        <div class="nav">
            <ul>
                <li><a href="#">Topic 1</a></li>
                <li><a href="#">Topic 2</a></li>
                <li><a href="#">Topic 3</a></li>
                <li><a href="#">Topic 4</a></li>
            </ul>
        </div>
    </div>
    <!-- header end -->
    <!-- subnav start -->
    <div class="subnav w">
        <ul>
            <li><a href="#">Section 1</a></li>
            <li><a href="#">Section 2</a></li>
            <li><a href="#">Section 3</a></li>
            <li><a href="#">Section 4</a></li>
        </ul>
    </div>
    <!-- subnav end -->
    <!-- box start -->
    <div class="box w">
        <!-- left-box start -->
        <div class="left-box">
            <ul>
                <li><a href="#">Section 1</a></li>
                <li><a href="#">Section 2</a></li>
                <li><a href="#">Section 3</a></li>
                <li><a href="#">Section 4</a></li>
                <li><a href="#">Section 5</a></li>
            </ul>
        </div>
        <!-- left-box end -->
        <!-- mid-box start -->
        <div class="mid-box">
            <div class="mid-top">
                abc
            </div>
            <div class="mid-bot">
                <form action="/" method="POST" enctype="multipart/form-data">
                    <div>
                        <!--<label for="inputfile">Specify a file:</label><br>
                        <input type="file" id="inputfile" name="inputfile">
                        <input class="btn" type="submit" name="submit" value="Upload">-->

                        
                    </div>

                    <!-- <textarea id="content-target"></textarea>
                    <input type="button" value="read file" id="read-file" onclick="read()"> -->
                </form>
                <script src="./static/opensheetmusicdisplay.min.js"></script>
                    <div id="osmdCanvas"/>

                    <input type="file" id="files" name="files">
                    <!--<div id="list"></output>-->

                    <script>
                    var openSheetMusicDisplay = new opensheetmusicdisplay.OpenSheetMusicDisplay("osmdCanvas");
                    function handleFileSelect(evt) {
                        //var file = evt.target.files[0];
                        var file = evt.target.files[0];
                        console.log(file);

                        //var output = [];
                        //output.push("<li><strong>", escape(file.name), "</strong> </li>");
                        //document.getElementById("list").innerHTML = "<ul>" + output + "</ul>";

                        if (!file.name.match('.*\.xml') && !file.name.match('.*\.musicxml') && !file.name.match('.*\.mxl')) {
                        alert('You selected a non-xml file. Please select only music xml files.');
                        return;
                        }

                        var reader = new FileReader();
                        reader.onload = (function(theFile) {
                        return function(e) {
                        openSheetMusicDisplay.load(e.target.result).then(
                            function() {
                            //console.log("e.target.result: " + e.target.result);
                            openSheetMusicDisplay.render();
                            }
                        );
                        }
                        })(file);
                        reader.readAsText(file);
                        }

                    document.getElementById("files").addEventListener("change", handleFileSelect, false);
                </script>

            </div>
        </div>
        <!-- mid-box end -->
        <!-- right-box start -->
        <div class="right-box">
            123
        </div>
        <!-- right-box end -->
    </div>
    <!-- box end -->
</body>


</html>